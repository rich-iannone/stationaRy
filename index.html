<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Detailed Meteorological Data from Stations All Over the World • stationaRy</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Detailed Meteorological Data from Stations All Over the World">
<meta property="og:description" content="Acquire hourly meteorological data from stations located all over
    the world. There is a wealth of data available, with historic weather data
    accessible from nearly 30,000 stations. The available data is automatically
    downloaded from a data repository and processed into a tibble for the
    exact range of years requested. A relative humidity approximation is
    provided using the August-Roche-Magnus formula, which was adapted from
    Alduchov and Eskridge (1996) &lt;doi:10.1175%2F1520-0450%281996%29035%3C0601%3AIMFAOS%3E2.0.CO%3B2&gt;.">
<meta property="og:image" content="/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">stationaRy</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rich-iannone/stationaRy/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="stationary" class="section level1">


<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>Get meteorological data from met stations located all over the world. That’s what you can do with this <strong>R</strong> package. There are <em>LOTS</em> of stations too (29,729 available in this dataset) and many have data that go pretty far back in time. The data comes from the Integrated Surface Dataset (ISD), which is maintained by the National Oceanic and Atmospheric Administration (NOAA).</p>
<div id="retrieving-met-data-with-a-station_id" class="section level3">
<h3 class="hasAnchor">
<a href="#retrieving-met-data-with-a-station_id" class="anchor"></a>Retrieving Met Data with a <code>station_id</code>
</h3>
<p>Let’s get some met data from La Guardia Airport in New York City (the station ID value is <code>"725030-14732"</code>). This station has a pretty long history (starting operations in 1973) but we’ll just obtain data from the years of 2017 and 2018.</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="no">lga_met_data</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="reference/get_met_data.html">get_met_data</a></span>(
    <span class="kw">station_id</span> <span class="kw">=</span> <span class="st">"725030-14732"</span>,
    <span class="kw">years</span> <span class="kw">=</span> <span class="fl">2017</span>:<span class="fl">2018</span>
  )</pre></div>
<div class="sourceCode" id="cb2"><pre class="r"><span class="no">lga_met_data</span>
<span class="co">#&gt; # A tibble: 17,520 x 10</span>
<span class="co">#&gt;    id    time                 temp    wd    ws atmos_pres dew_point    rh</span>
<span class="co">#&gt;    &lt;chr&gt; &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1 7250… 2017-01-01 00:00:00   7.2   230   5.7      1012.      -4.4  43.5</span>
<span class="co">#&gt;  2 7250… 2017-01-01 01:00:00   7.8   230   4.6      1012.      -3.9  43.4</span>
<span class="co">#&gt;  3 7250… 2017-01-01 02:00:00   7.2   230   3.6      1012.      -2.2  51.3</span>
<span class="co">#&gt;  4 7250… 2017-01-01 03:00:00   7.8   240   5.7      1013.      -3.3  45.4</span>
<span class="co">#&gt;  5 7250… 2017-01-01 04:00:00   7.8   240   4.6      1013.      -3.9  43.4</span>
<span class="co">#&gt;  6 7250… 2017-01-01 05:00:00   8.3   240   4.6      1014.      -4.4  40.4</span>
<span class="co">#&gt;  7 7250… 2017-01-01 06:00:00   8.3   250   5.1      1015.      -3.9  41.9</span>
<span class="co">#&gt;  8 7250… 2017-01-01 07:00:00   8.3   260   5.7      1016.      -3.3  43.8</span>
<span class="co">#&gt;  9 7250… 2017-01-01 08:00:00   8.3   240   5.1      1017.      -2.8  45.5</span>
<span class="co">#&gt; 10 7250… 2017-01-01 09:00:00   8.3   260   6.2      1019.      -2.8  45.5</span>
<span class="co">#&gt; # … with 17,510 more rows, and 2 more variables: ceil_hgt &lt;dbl&gt;,</span>
<span class="co">#&gt; #   visibility &lt;dbl&gt;</span></pre></div>
</div>
<div id="discovering-met-stations" class="section level3">
<h3 class="hasAnchor">
<a href="#discovering-met-stations" class="anchor"></a>Discovering Met Stations</h3>
<p>At a minimum we need a station’s identifier to obtain its met data. We can start the process of getting an identifier by accessing the entire catalog of station metadata with the <code><a href="reference/get_station_metadata.html">get_station_metadata()</a></code> function. The output tibble has station <code>id</code> values in the first column. Let’s get a subset of stations from that: those stations that are located in Norway.</p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="no">stations_norway</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="reference/get_station_metadata.html">get_station_metadata</a></span>() <span class="kw">%&gt;%</span>
  <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="no">country</span> <span class="kw">==</span> <span class="st">"NO"</span>)

<span class="no">stations_norway</span>
<span class="co">#&gt; # A tibble: 405 x 16</span>
<span class="co">#&gt;    id    usaf  wban  name  country state icao    lat   lon  elev begin_date</span>
<span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;date&gt;    </span>
<span class="co">#&gt;  1 0100… 0100… 99999 BOGU… NO      &lt;NA&gt;  ENRS   NA   NA     NA   2001-09-27</span>
<span class="co">#&gt;  2 0100… 0100… 99999 JAN … NO      &lt;NA&gt;  ENJA   70.9 -8.67   9   1931-01-01</span>
<span class="co">#&gt;  3 0100… 0100… 99999 ROST  NO      &lt;NA&gt;  &lt;NA&gt;   NA   NA     NA   1986-11-20</span>
<span class="co">#&gt;  4 0100… 0100… 99999 SORS… NO      &lt;NA&gt;  ENSO   59.8  5.34  48.8 1986-11-20</span>
<span class="co">#&gt;  5 0100… 0100… 99999 BRIN… NO      &lt;NA&gt;  &lt;NA&gt;   61.4  5.87 327   1987-01-17</span>
<span class="co">#&gt;  6 0100… 0100… 99999 RORV… NO      &lt;NA&gt;  &lt;NA&gt;   64.8 11.2   14   1987-01-16</span>
<span class="co">#&gt;  7 0100… 0100… 99999 FRIGG NO      &lt;NA&gt;  ENFR   60.0  2.25  48   1988-03-20</span>
<span class="co">#&gt;  8 0100… 0100… 99999 VERL… NO      &lt;NA&gt;  &lt;NA&gt;   80.0 16.2    8   1986-11-09</span>
<span class="co">#&gt;  9 0100… 0100… 99999 HORN… NO      &lt;NA&gt;  &lt;NA&gt;   77   15.5   12   1985-06-01</span>
<span class="co">#&gt; 10 0100… 0100… 99999 NY-A… NO      &lt;NA&gt;  ENAS   78.9 11.9    8   1973-01-01</span>
<span class="co">#&gt; # … with 395 more rows, and 5 more variables: end_date &lt;date&gt;,</span>
<span class="co">#&gt; #   begin_year &lt;int&gt;, end_year &lt;int&gt;, tz_name &lt;chr&gt;, years &lt;list&gt;</span></pre></div>
<p>This table can be even more greatly reduced to isolate the stations of interest. For example, we could elect to get only high-altitude stations (above 1000 meters) in Norway.</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="no">norway_high_elev</span> <span class="kw">&lt;-</span>
  <span class="no">stations_norway</span> <span class="kw">%&gt;%</span>
  <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="no">elev</span> <span class="kw">&gt;</span> <span class="fl">1000</span>)

<span class="no">norway_high_elev</span>
<span class="co">#&gt; # A tibble: 12 x 16</span>
<span class="co">#&gt;    id    usaf  wban  name  country state icao    lat   lon  elev begin_date</span>
<span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;date&gt;    </span>
<span class="co">#&gt;  1 0122… 0122… 99999 MANN… NO      &lt;NA&gt;  &lt;NA&gt;   62.4  7.77 1294  2010-03-15</span>
<span class="co">#&gt;  2 0123… 0123… 99999 HJER… NO      &lt;NA&gt;  &lt;NA&gt;   62.2  9.55 1012  2010-09-07</span>
<span class="co">#&gt;  3 0134… 0134… 99999 MIDT… NO      &lt;NA&gt;  &lt;NA&gt;   60.6  7.27 1162  2011-11-25</span>
<span class="co">#&gt;  4 0135… 0135… 99999 FINS… NO      &lt;NA&gt;  &lt;NA&gt;   60.6  7.53 1208  2003-03-30</span>
<span class="co">#&gt;  5 0135… 0135… 99999 FINS… NO      &lt;NA&gt;  &lt;NA&gt;   60.6  7.5  1224  1973-01-02</span>
<span class="co">#&gt;  6 0135… 0135… 99999 SAND… NO      &lt;NA&gt;  &lt;NA&gt;   60.2  7.48 1250  2004-01-07</span>
<span class="co">#&gt;  7 0136… 0136… 99999 JUVV… NO      &lt;NA&gt;  &lt;NA&gt;   61.7  8.37 1894  2009-06-26</span>
<span class="co">#&gt;  8 0136… 0136… 99999 SOGN… NO      &lt;NA&gt;  &lt;NA&gt;   61.6  8    1413  1979-03-01</span>
<span class="co">#&gt;  9 0137… 0137… 99999 KVIT… NO      &lt;NA&gt;  &lt;NA&gt;   61.5 10.1  1028  1973-01-01</span>
<span class="co">#&gt; 10 0143… 0143… 99999 MIDT… NO      &lt;NA&gt;  &lt;NA&gt;   59.8  6.98 1081  1973-01-01</span>
<span class="co">#&gt; 11 0144… 0144… 99999 BLAS… NO      &lt;NA&gt;  &lt;NA&gt;   59.3  6.87 1105. 1973-01-01</span>
<span class="co">#&gt; 12 0146… 0146… 99999 GAUS… NO      &lt;NA&gt;  &lt;NA&gt;   59.8  8.65 1804. 2014-06-05</span>
<span class="co">#&gt; # … with 5 more variables: end_date &lt;date&gt;, begin_year &lt;int&gt;, end_year &lt;int&gt;,</span>
<span class="co">#&gt; #   tz_name &lt;chr&gt;, years &lt;list&gt;</span></pre></div>
<p>The station IDs from the tibble can be transformed into a vector of station IDs with <code><a href="https://dplyr.tidyverse.org/reference/pull.html">dplyr::pull()</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="r"><span class="no">norway_high_elev</span> <span class="kw">%&gt;%</span> <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span>(<span class="no">id</span>)
<span class="co">#&gt;  [1] "012200-99999" "012390-99999" "013460-99999" "013500-99999" "013510-99999"</span>
<span class="co">#&gt;  [6] "013520-99999" "013620-99999" "013660-99999" "013750-99999" "014330-99999"</span>
<span class="co">#&gt; [11] "014400-99999" "014611-99999"</span></pre></div>
<p>Suppose you’d like to collect several years of met data from a particular station and fetch only the observations that meet some set of conditions. Here’s an example of obtaining temperatures above 15 degrees Celsius from the high-altitude <code>"JUVVASSHOE"</code> station in Norway and adding a column with temperatures in degrees Fahrenheit.</p>
<div class="sourceCode" id="cb6"><pre class="r"><span class="no">station_data</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="reference/get_station_metadata.html">get_station_metadata</a></span>() <span class="kw">%&gt;%</span>
  <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="no">name</span> <span class="kw">==</span> <span class="st">"JUVVASSHOE"</span>) <span class="kw">%&gt;%</span>
  <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span>(<span class="no">id</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/get_met_data.html">get_met_data</a></span>(<span class="kw">years</span> <span class="kw">=</span> <span class="fl">2011</span>:<span class="fl">2019</span>)

<span class="no">high_temp_data</span> <span class="kw">&lt;-</span>
  <span class="no">station_data</span> <span class="kw">%&gt;%</span>
  <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">id</span>, <span class="no">time</span>, <span class="no">wd</span>, <span class="no">ws</span>, <span class="no">temp</span>) <span class="kw">%&gt;%</span>
  <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="no">temp</span> <span class="kw">&gt;</span> <span class="fl">16</span>) <span class="kw">%&gt;%</span>
  <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">temp_f</span> <span class="kw">=</span> ((<span class="no">temp</span> * (<span class="fl">9</span>/<span class="fl">5</span>)) + <span class="fl">32</span>) <span class="kw">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="fl">1</span>)) <span class="kw">%&gt;%</span>
  <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span>(<span class="no">temp_f</span>))</pre></div>
<div class="sourceCode" id="cb7"><pre class="r"><span class="no">high_temp_data</span>
<span class="co">#&gt; # A tibble: 50 x 6</span>
<span class="co">#&gt;    id           time                   wd    ws  temp temp_f</span>
<span class="co">#&gt;    &lt;chr&gt;        &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span>
<span class="co">#&gt;  1 013620-99999 2019-07-26 15:00:00   160     5  18.5   65.3</span>
<span class="co">#&gt;  2 013620-99999 2019-07-26 17:00:00   210     3  18.4   65.1</span>
<span class="co">#&gt;  3 013620-99999 2019-07-26 18:00:00   180     2  18.3   64.9</span>
<span class="co">#&gt;  4 013620-99999 2019-07-26 16:00:00   180     4  18.2   64.8</span>
<span class="co">#&gt;  5 013620-99999 2014-07-23 16:00:00   270     2  17.6   63.7</span>
<span class="co">#&gt;  6 013620-99999 2019-07-26 14:00:00   150     4  17.5   63.5</span>
<span class="co">#&gt;  7 013620-99999 2014-07-23 17:00:00   300     4  17.3   63.1</span>
<span class="co">#&gt;  8 013620-99999 2019-07-28 16:00:00   130     6  17.3   63.1</span>
<span class="co">#&gt;  9 013620-99999 2014-07-23 18:00:00   280     3  17.2   63  </span>
<span class="co">#&gt; 10 013620-99999 2018-07-04 15:00:00   340     2  17.2   63  </span>
<span class="co">#&gt; # … with 40 more rows</span></pre></div>
</div>
<div id="additional-data-fields" class="section level3">
<h3 class="hasAnchor">
<a href="#additional-data-fields" class="anchor"></a>Additional Data Fields</h3>
<p>There can be a substantial amount of additional met data beyond wind speed, ambient temperature, etc. However, these additional fields can vary greatly across stations. The nomenclature for the additional categories of data uses ‘two-letter + digit’ identifiers (e.g., <code>AA1</code>, <code>GA1</code>, etc.). Within each category are numerous fields, where the variables are coded as <code>[identifer]_[index]</code>). More information about these additional data fields can be found in <a href="http://www1.ncdc.noaa.gov/pub/data/ish/ish-format-document.pdf">this PDF document</a>.</p>
<p>To find out which categories of additional data fields are available for a station, we can use the <code><a href="reference/station_coverage.html">station_coverage()</a></code> function. You’ll get a tibble with the available additional categories and their counts over the specified period.</p>
<div class="sourceCode" id="cb8"><pre class="r"><span class="no">additional_data_fields</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="reference/get_station_metadata.html">get_station_metadata</a></span>() <span class="kw">%&gt;%</span>
  <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="no">name</span> <span class="kw">==</span> <span class="st">"JUVVASSHOE"</span>) <span class="kw">%&gt;%</span>
  <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span>(<span class="no">id</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/station_coverage.html">station_coverage</a></span>(<span class="kw">years</span> <span class="kw">=</span> <span class="fl">2015</span>)</pre></div>
<div class="sourceCode" id="cb9"><pre class="r"><span class="no">additional_data_fields</span>
<span class="co">#&gt; # A tibble: 87 x 3</span>
<span class="co">#&gt;    id           category count</span>
<span class="co">#&gt;    &lt;chr&gt;        &lt;chr&gt;    &lt;int&gt;</span>
<span class="co">#&gt;  1 013620-99999 AA1          0</span>
<span class="co">#&gt;  2 013620-99999 AB1          0</span>
<span class="co">#&gt;  3 013620-99999 AC1          0</span>
<span class="co">#&gt;  4 013620-99999 AD1          0</span>
<span class="co">#&gt;  5 013620-99999 AE1          0</span>
<span class="co">#&gt;  6 013620-99999 AG1          0</span>
<span class="co">#&gt;  7 013620-99999 AH1          0</span>
<span class="co">#&gt;  8 013620-99999 AI1          0</span>
<span class="co">#&gt;  9 013620-99999 AJ1        194</span>
<span class="co">#&gt; 10 013620-99999 AK1          0</span>
<span class="co">#&gt; # … with 77 more rows</span></pre></div>
<p>We can use <strong>purrr</strong>’s <code>map_df()</code> function to get additional data field coverage for a subset of stations (those that are near sea level and have data in 2019). With the <code><a href="reference/station_coverage.html">station_coverage()</a></code> function set to output tibbles in <code>wide</code> mode (one row per station, field categories as columns, and counts of observations as values), we can ascertain which stations have the particular fields we need.</p>
<div class="sourceCode" id="cb10"><pre class="r"><span class="no">stns</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="reference/get_station_metadata.html">get_station_metadata</a></span>() <span class="kw">%&gt;%</span>
  <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="no">country</span> <span class="kw">==</span> <span class="st">"NO"</span>, <span class="no">elev</span> <span class="kw">&lt;=</span> <span class="fl">5</span> <span class="kw">&amp;</span> <span class="no">end_year</span> <span class="kw">==</span> <span class="fl">2019</span>)

<span class="no">coverage_tbl</span> <span class="kw">&lt;-</span>
  <span class="kw pkg">purrr</span><span class="kw ns">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map_df</a></span>(
    <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">stns</span>)),
    <span class="kw">function</span>(<span class="no">x</span>) {
      <span class="no">stns</span> <span class="kw">%&gt;%</span>
        <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span>(<span class="no">id</span>) <span class="kw">%&gt;%</span>
        <span class="no">.</span><span class="kw">[[</span><span class="no">x</span>]] <span class="kw">%&gt;%</span>
        <span class="fu"><a href="reference/station_coverage.html">station_coverage</a></span>(
          <span class="kw">years</span> <span class="kw">=</span> <span class="fl">2019</span>,
          <span class="kw">wide_tbl</span> <span class="kw">=</span> <span class="fl">TRUE</span>
        )
    }
  )</pre></div>
<div class="sourceCode" id="cb11"><pre class="r"><span class="no">coverage_tbl</span>
<span class="co">#&gt; # A tibble: 1 x 88</span>
<span class="co">#&gt;   id       AA1   AB1   AC1   AD1   AE1   AG1   AH1   AI1   AJ1   AK1   AL1   AM1</span>
<span class="co">#&gt; * &lt;chr&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt; 1 01167…   491     0     0     0     0     0     0     0   167     0     0     0</span>
<span class="co">#&gt; # … with 75 more variables: AN1 &lt;int&gt;, AO1 &lt;int&gt;, AP1 &lt;int&gt;, AU1 &lt;int&gt;,</span>
<span class="co">#&gt; #   AW1 &lt;int&gt;, AX1 &lt;int&gt;, AY1 &lt;int&gt;, AZ1 &lt;int&gt;, CB1 &lt;int&gt;, CF1 &lt;int&gt;,</span>
<span class="co">#&gt; #   CG1 &lt;int&gt;, CH1 &lt;int&gt;, CI1 &lt;int&gt;, CN1 &lt;int&gt;, CN2 &lt;int&gt;, CN3 &lt;int&gt;,</span>
<span class="co">#&gt; #   CN4 &lt;int&gt;, CR1 &lt;int&gt;, CT1 &lt;int&gt;, CU1 &lt;int&gt;, CV1 &lt;int&gt;, CW1 &lt;int&gt;,</span>
<span class="co">#&gt; #   CX1 &lt;int&gt;, CO1 &lt;int&gt;, CO2 &lt;int&gt;, ED1 &lt;int&gt;, GA1 &lt;int&gt;, GD1 &lt;int&gt;,</span>
<span class="co">#&gt; #   GF1 &lt;int&gt;, GG1 &lt;int&gt;, GH1 &lt;int&gt;, GJ1 &lt;int&gt;, GK1 &lt;int&gt;, GL1 &lt;int&gt;,</span>
<span class="co">#&gt; #   GM1 &lt;int&gt;, GN1 &lt;int&gt;, GO1 &lt;int&gt;, GP1 &lt;int&gt;, GQ1 &lt;int&gt;, GR1 &lt;int&gt;,</span>
<span class="co">#&gt; #   HL1 &lt;int&gt;, IA1 &lt;int&gt;, IA2 &lt;int&gt;, IB1 &lt;int&gt;, IB2 &lt;int&gt;, IC1 &lt;int&gt;,</span>
<span class="co">#&gt; #   KA1 &lt;int&gt;, KB1 &lt;int&gt;, KC1 &lt;int&gt;, KD1 &lt;int&gt;, KE1 &lt;int&gt;, KF1 &lt;int&gt;,</span>
<span class="co">#&gt; #   KG1 &lt;int&gt;, MA1 &lt;int&gt;, MD1 &lt;int&gt;, ME1 &lt;int&gt;, MF1 &lt;int&gt;, MG1 &lt;int&gt;,</span>
<span class="co">#&gt; #   MH1 &lt;int&gt;, MK1 &lt;int&gt;, MV1 &lt;int&gt;, MW1 &lt;int&gt;, OA1 &lt;int&gt;, OB1 &lt;int&gt;,</span>
<span class="co">#&gt; #   OC1 &lt;int&gt;, OE1 &lt;int&gt;, RH1 &lt;int&gt;, SA1 &lt;int&gt;, ST1 &lt;int&gt;, UA1 &lt;int&gt;,</span>
<span class="co">#&gt; #   UG1 &lt;int&gt;, UG2 &lt;int&gt;, WA1 &lt;int&gt;, WD1 &lt;int&gt;, WG1 &lt;int&gt;</span></pre></div>
<p>For the <code>"KAWAIHAE"</code> station in Hawaii, some interesting data fields are available. In particular, its <code>SA1</code> category provides sea surface temperature data, where the <code>sa1_1</code> and <code>sa1_2</code> variables represent the sea surface temperature and its quality code.</p>
<p>Combining the use of <code><a href="reference/get_met_data.html">get_met_data()</a></code> with functions from <strong>dplyr</strong>, we can create a table of the mean ambient and sea-surface temperatures by month. The additional data is included in the met data table by using the <code>add_fields</code> argument and specifying the <code>"SA1"</code> category (multiple categories can be included).</p>
<div class="sourceCode" id="cb12"><pre class="r"><span class="no">kawaihae_sst</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="reference/get_met_data.html">get_met_data</a></span>(
    <span class="kw">station_id</span> <span class="kw">=</span> <span class="st">"997173-99999"</span>,
    <span class="kw">years</span> <span class="kw">=</span> <span class="fl">2017</span>:<span class="fl">2018</span>,
    <span class="kw">add_fields</span> <span class="kw">=</span> <span class="st">"SA1"</span>
  ) <span class="kw">%&gt;%</span>
  <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(
    <span class="kw">year</span> <span class="kw">=</span> <span class="kw pkg">lubridate</span><span class="kw ns">::</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/year.html">year</a></span>(<span class="no">time</span>),
    <span class="kw">month</span> <span class="kw">=</span> <span class="kw pkg">lubridate</span><span class="kw ns">::</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/month.html">month</a></span>(<span class="no">time</span>)
  ) <span class="kw">%&gt;%</span>
  <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="no">sa1_2</span> <span class="kw">==</span> <span class="fl">1</span>) <span class="kw">%&gt;%</span>
  <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(<span class="no">year</span>, <span class="no">month</span>) <span class="kw">%&gt;%</span>
  <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span>(
    <span class="kw">avg_temp</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">temp</span>, <span class="kw">na.rm</span> <span class="kw">=</span> <span class="fl">TRUE</span>),
    <span class="kw">avg_sst</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">sa1_1</span>, <span class="kw">na.rm</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
  )</pre></div>
<div class="sourceCode" id="cb13"><pre class="r"><span class="no">kawaihae_sst</span>
<span class="co">#&gt; # A tibble: 6 x 4</span>
<span class="co">#&gt; # Groups:   year [2]</span>
<span class="co">#&gt;    year month avg_temp avg_sst</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1  2017    12     24.0    25.7</span>
<span class="co">#&gt; 2  2018     1     23.8    25.2</span>
<span class="co">#&gt; 3  2018     2     23.7    25.1</span>
<span class="co">#&gt; 4  2018     3     23.8    25.0</span>
<span class="co">#&gt; 5  2018     4     25.6    26.3</span>
<span class="co">#&gt; 6  2018    12     26.5    25.9</span></pre></div>
</div>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>The <strong>stationaRy</strong> package can be easily installed from CRAN.</p>
<div class="sourceCode" id="cb14"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"stationaRy"</span>)</pre></div>
<p>To install the development version of <strong>stationaRy</strong>, use the following:</p>
<div class="sourceCode" id="cb15"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"devtools"</span>)
<span class="kw pkg">remotes</span><span class="kw ns">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"rich-iannone/stationaRy"</span>)</pre></div>
<p>If you encounter a bug, have usage questions, or want to share ideas to make this package better, feel free to file an <a href="https://github.com/rich-iannone/stationaRy/issues">issue</a>.</p>
</div>
<div id="license" class="section level2">
<h2 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h2>
<p>MIT © Richard Iannone</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=stationaRy">https://​cloud.r-project.org/​package=stationaRy</a>
</li>
<li>Browse source code at <br><a href="https://github.com/rich-iannone/stationaRy/">https://​github.com/​rich-iannone/​stationaRy/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/rich-iannone/stationaRy/issues">https://​github.com/​rich-iannone/​stationaRy/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Richard Iannone <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-3925-190X" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=stationaRy"><img src="https://www.r-pkg.org/badges/version/stationaRy" alt="CRAN status"></a></li>
<li><a href="https://github.com/rich-iannone/stationaRy/actions"><img src="https://github.com/rich-iannone/stationaRy/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://codecov.io/gh/rich-iannone/stationaRy?branch=master"><img src="https://codecov.io/gh/rich-iannone/stationaRy/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Richard Iannone.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
